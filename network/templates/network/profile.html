{% extends "network/layout.html" %}
{% load static %}
{% block body %}
    <div id="new_post_view">
        <h3></h3>
    </div>
    <div id="profile_view">
        <h2 id="profile_poster">{{poster}}</h2>
        {% if poster.id != user.id  and user.is_authenticated%}
            <button id="follow-btn" class="page_button" onclick="follow('{{poster.id}}', '{{user.id}}', '{{followed_by}}')" value='{{user_following}}'>{{user_following}}</button>
            </br>
        {% else %}   
            <button style="display:none;" id="follow-btn" class="page_button" onclick="follow('{{poster.id}}', '{{user.id}}', '{{followed_by}}')" value='{{user_following}}'>{{user_following}}</button>
            </br>
        {% endif %}
       <div id="profile_header">
            {{profile_posts.count}} Posts
            &emsp;&emsp;
            {% if followed_by %}
                {% for follow in followed_by %}
                    <button id="profile_followers_count" class="no-button">{{ follow.follower.all.count }} </button>
                    Followers
                    {% if not follow.follower.all  %}
                        <button id="profile_followers_list" class="no-button" style="display:none"> </button>
                    {% endif %}
                {% endfor %}
            {% else %}
                0 Followers
            {% endif %}
            &emsp;&emsp;
            {% if followers %}
                {{ followers|length }} 
                {% if followers|length > 1 %} Followings
                {% else %} Followings
                {% endif %}
            {% else %}
                0 Followings
            {% endif %}
        </div>
        <div id="all_posts_view">
            <div id="page_0">  
                {% if profile_posts %}    
                    {% for post in profile_posts %} 
                        <div  id="posts_style">
                            <a >{{ post.poster }}</a>
                            <div id="post-description-{{post.id}}" class="description_post"> <p>{{ post.description }} </p></div>
                            {% if post.poster.id == user.id %}
                                <div id="edit" onclick="edit_field('{{ post.id }}')">Edit</div>
                            {% else %}
                            {% endif %}
                            <textarea class="form-control mb-2" id="edit-box-{{post.id}}" name="edit-box" style="display:none;" wrap="off" cols="30" rows="5">{{ post.description }}</textarea>
                            <div id="edit-btns">
                                <button id="edit-save-btn-{{post.id}}" class="page_button" style="display:none;"  onclick="save_edit('{{ post.id }}')">Save</button>
                            </div>
                            {% if user.id in post.likers_id %}
                                <button class="yes_button" id="like-btn-{{post.id}}" value="heart_full" onclick="like('{{ post.id }}')">
                                    <img src="{% static 'network/images/heart_full.jpg' %}" id="heart-img-{{ post.id }}" alt="jacket" width="25" >
                                </button>
                            {% else %}
                                <button class="yes_button" id="like-btn-{{post.id}}" value="heart_empty"  onclick="like('{{ post.id }}')">
                                    <img src="{% static 'network/images/heart_empty.jpg' %}" id="heart-img-{{ post.id }}" alt="jacket" width="25" >
                                </button>
                            {% endif %}
                            <div id="like-count-{{post.id}}" class="d-inline-block">{{post.number_likes}} </div> likes
                            <div id="post-{{post.date_added}}" class="date_post"> {{ post.date_added }}</div>
                            <div>{{ post.timestamp }}</div>
                        </div>
                    {% endfor %}
                    <div id="id_page_buttons">
                        <button id="selected_button" class="no-button" > 1 </button>
                        {% if list_total_pages %}
                            {% for page in list_total_pages %} 
                                <button class="page_button"  id="not_selected_button" onclick="pages('{{user.id}}', 0, '{{page}}'-1)">{{page}}</button>
                            {% endfor %}
                            <button class="page_button" onclick="pages('{{user.id}}', 0, 1)">Next page</button>
                    {% endif %}
                    </div>
                    <button id="username" class="no-button" style="display:none">{{ user.username }} </button>
                {% else %}
                    <li>no post</li>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}
